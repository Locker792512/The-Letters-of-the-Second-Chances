:root{
	--env-bg:#f3f6fb;
	--env-main:#d9644a;
	--env-flap:#8c078f;
	--accent:#2b7cff;
	--max-width:420px;;
}

*{box-sizing:border-box;
}


html,body{
    height:100%;
    margin:0}


body{
    display:flex;
    align-items:center;
    justify-content:center;
    background-color:var(--env-bg);
    /* page background image (replace 'bg.jpg' with your image file) */
    background-image: url('bg.jpg');
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    padding:24px}
    .scene{display:flex;
        flex-direction:column;
        align-items:center;
        gap:18px;
        width:100%;
        max-width:min(92vw,var(--max-width));
        margin-inline:auto}

/* Envelope container scales with viewport; aspect-ratio keeps proportions */
.envelope{
    position:relative;
    width:100%;
    max-width:100%;
    aspect-ratio:16/10;
    perspective:900px;
    /* ensure envelope never exceeds viewport height so content remains visible */
    max-height:calc(100vh - 160px);
    display:block}

.envelope .body{
    position:absolute;
    left:0;right:0;
    top:0;
    bottom:0;
    background:var(--env-main);
    border-radius:8px;
    box-shadow:0 10px 24px rgba(0,0,0,.12);
    overflow:hidden;
    z-index:1}
    
.envelope .flap{
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background: url('cover11.jpg') center/cover no-repeat;
    border-radius:8px;
    transform-origin:top left;
    transform:rotateY(0deg);
    transition:transform .8s cubic-bezier(.2,.9,.2,1);
    box-shadow:0 6px 14px rgba(0,0,0,.08);
    z-index:10;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden}

h2 {
    text-align: center;
}

/* Letter card inside envelope */
.envelope .letter{
    position:absolute;
    left:5%;
    right:5%;
    top:8%;
    bottom:8%;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:2}

.letter-inner{display:flex;flex-direction:column;width:100%;height:100%;}
.letter-inner .letter-text{overflow:auto;padding-right:6px}
.letter-inner .letter-text{max-height:100%}

/* Login modal styles */
.login-modal{
    position:fixed;
    inset:0;
    /* translucent overlay and blurred backdrop when supported */
    background: rgba(0,0,0,0.28);
    -webkit-backdrop-filter: blur(8px) saturate(120%);
    backdrop-filter: blur(8px) saturate(120%);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    z-index:60;
    color: purple;
    font-family: sans-serif;
}

.login-content{
    width:clamp(260px,86vw,420px);
    /* slightly translucent so backdrop blur is visible through the card */
    background: rgba(255,255,255,0.92);
    border-radius:12px;
    padding:18px 16px;
    box-shadow:0 18px 36px rgba(0, 0, 0, 0.18);
    display:flex;
    flex-direction:column;
    gap:10px
}

.login-content h2{margin:0;
    font-size:1.1rem
}

.login-content label{
    font-size:.85rem;
    margin-top:8px;
}

.login-content input{width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #dcdcdc;
    font-size:1rem;
    color: rebeccapurple;
}

.login-content input:focus{outline:none;
    border-color:var(--accent);
    box-shadow:0 6px 16px rgba(43,124,255,0.08)
}

.login-content button[type=submit]{
    margin-top:8px;
    padding:10px 12px;
    border-radius:8px;
    border:none;
    background:var(--accent);
    color:#fff;
    font-weight:700;
    cursor:pointer;
    transition:transform 160ms ease,box-shadow 200ms ease
}

.login-content button[type=submit]:hover{transform:translateY(-3px);
    box-shadow:0 12px 28px rgba(43,124,255,0.18)
}

.login-hint{color:#555454;
    font-size:0.82rem
}

.login-error{
    color:#b00020;
    min-height:1.2em;font-size:.9rem
}

/* small screens: ensure modal fits in landscape and portrait */
@media (orientation:landscape) and (max-height:420px){
    .login-content{
        width:clamp(300px,60vw,560px);
        padding:14px}
    .login-content input{padding:8px}
}

@media (max-width:360px){
    .login-content{padding:12px;
     border-radius:10px}
    .login-content h2{font-size:1rem}
}

.letter-inner{width:100%;
    height:100%;
    background:#fff;
    padding:18px;
    border-radius:6px;
    box-shadow:0 6px 12px rgba(0,0,0,.06);
    overflow:auto
}

.letter-text{
    white-space:pre-wrap;
    color:#28057b;
    line-height:1.5;
    font-size:clamp(14px,1.6vw,18px);
    color: green;
    font-family:'Times New Roman', Times, serif;
    text-align: justify;
}

#letter-source{
    color: #0ac050;
}

/* Open state: flap rotates like book cover opening to the right, letter slides up into view */
.envelope.open .flap{transform:rotateY(-150deg)}
.envelope.open .letter .letter-inner{transform:none}

/* Button */
#openBtn{
    padding:10px 16px;
    border-radius:8px;
    border:none;
    background:var(--accent);
    color:#fff;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 6px 12px rgba(43,124,255,0.16);
    transition:transform 180ms ease, box-shadow 220ms ease, background-color 180ms ease, color 180ms ease;
    will-change:transform, box-shadow;
}

#openBtn:hover,
#openBtn:focus{
    transform:translateY(-4px) scale(1.03);
    box-shadow:0 12px 28px rgba(43,124,255,0.22);
    background-color:#0ac050;
    color:#fff;
    outline:none;
}

#openBtn:active{
    transform:translateY(-1px) scale(1.02);
}

#openBtn:focus-visible{
    box-shadow:0 0 0 4px rgba(6, 37, 86, 0.12);
}

/* Audio controls inside the letter */
.audio-controls{
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    margin-top:5px;
}

.audio-controls .volume-control{flex:1;
    min-width:120px
}

.audio-controls input[type=range]{
    width:100%;
}

.audio-controls .playback-buttons{
    display:flex;
    gap:30px;
    /*margin-top: 500px;*/
}

.audio-controls button{padding:6px 10px;border-radius:8px;border:none;background:#f1f1f1;cursor:pointer;font-weight:600}
.audio-controls button[aria-pressed="true"]{background:#dbeffd}

@media (max-width:480px){
    .audio-controls{flex-direction:column;align-items:stretch}
    .audio-controls .playback-buttons{justify-content:space-between}
    .audio-controls button{width:48%}
}


/* Responsive tweaks for portrait/landscape and device sizes */
@media (max-width:480px){
	:root{--max-width:360px}
	.scene{padding:12px}
	.envelope{aspect-ratio:16/10}
	.letter-text{font-size:clamp(13px,1.4vw,16px)}
}

@media (orientation:landscape) and (max-height:500px){
	:root{--max-width:90vw}
	.scene{padding:8px}
    .envelope{aspect-ratio:18/8;max-height:78vh}
	.letter-text{font-size:clamp(12px,1vw,14px)}
	.letter-inner{padding:12px}
}

/* Very short screens (small landscape phones) â€” reduce envelope height and letter padding */
@media (max-height:420px){
    .envelope{max-height:calc(100vh - 120px);aspect-ratio:20/9}
    .letter-inner{padding:10px}
    #openBtn{padding:8px 12px}
}

@media (orientation:portrait) and (max-width:500px){
	:root{--max-width:100vw}
	.scene{padding:8px}
	.envelope{aspect-ratio:16/10}
	.letter-inner{padding:14px}
}

/* Ensure comfortable margins and padding for text on small phones */
@media (max-width:420px){
    .letter-inner{padding:16px; border-radius:6px}
    .letter-text{padding-inline:6px; font-size:clamp(14px,3.6vw,16px); line-height:1.6}
}

@media (max-width:360px){
    .letter-inner{padding:12px}
    .letter-text{padding-inline:8px; font-size:14px}
}

@media (min-width:768px){
	:root{--max-width:520px}
	.letter-text{font-size:16px}
	.scene{gap:20px}
}

@media (min-width:1024px){
	:root{--max-width:580px}
	.letter-text{font-size:18px}
}

/* Reduce motion preference: disable flap rotation, use simple show/hide */
@media (prefers-reduced-motion: reduce){
    .envelope .flap, .envelope .letter .letter-inner, #openBtn, .login-content button{transition:none}
    .envelope.open .flap{transform:none}
}


::-webkit-scrollbar{
    display: none;
}

/* ===== Modern theme overrides (keeps responsiveness) ===== */
body{font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}

/* Envelope modern look */
.envelope{
    border-radius:14px;
    overflow:visible;
}
.envelope .body{
    background: linear-gradient(180deg, rgba(217,100,74,0.95), rgba(217,100,74,0.85));
    box-shadow: 0 18px 40px rgba(9,30,66,0.12), inset 0 1px 0 rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.06);
}
.envelope .flap{
    border-radius:14px;
    background: url('cover11.jpg') center/cover no-repeat;
    box-shadow: 0 20px 48px rgba(2,6,23,0.18);
    transform-origin: left center;
}

/* Letter card modern surface */
.letter-inner{
    background: linear-gradient(180deg,#ffffff,#fbfdff);
    border-radius:10px;
    padding:20px;
    box-shadow: 0 12px 30px rgba(6,22,62,0.08);
    border: 1px solid rgba(12,32,80,0.04);
}
.letter-text{color:#1b1b1b}

/* Modern modal card */
.login-content{
    background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(250,250,252,0.9));
    border-radius:14px;
    padding:18px 18px;
    box-shadow: 0 24px 60px rgba(3,12,40,0.16);
    border: 1px solid rgba(8,20,60,0.06);
}

/* Primary open button modern style */
#openBtn{
    background: linear-gradient(180deg,#2b7cff,#1d5fd6);
    padding:12px 18px;border-radius:12px;border:none;color:#fff;font-weight:700;box-shadow:0 14px 36px rgba(43,124,255,0.18);transition:transform .18s ease,box-shadow .18s ease}
#openBtn:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}
#openBtn:hover:not(:disabled){transform:translateY(-4px);box-shadow:0 24px 56px rgba(43,124,255,0.22)}

/* Small visual tweaks for controls */
.audio-controls{gap:14px;padding:12px;border-radius:12px}
.audio-controls .volume-control{padding:6px}
.audio-controls .playback-buttons button{min-width:72px}

/* Ensure modern styles respect reduced-motion */
@media (prefers-reduced-motion: reduce){
    #openBtn, .audio-controls button{transition:none}
}

#volumeRange{
    cursor: pointer;
}

/* ...existing code... */

/* Responsive audio controls inside the letter */
:root {
  --audio-controls-height: 96px; /* default safe space */
}

/* make letter area leave room for controls */
.envelope .letter { position: relative; }
.envelope .letter-inner {
  box-sizing: border-box;
  overflow: auto;
  padding-bottom: calc(var(--audio-controls-height) + 16px);
  position: relative;
}

/* controls panel */
.audio-controls {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 12px;
  z-index: 30;
  width: calc(100% - 48px);
  max-width: 900px;
  display: flex;
  gap: 12px;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  background: rgba(255,255,255,0.98);
  border-radius: 12px;
  padding: 10px 14px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  box-sizing: border-box;
}

/* volume + buttons responsiveness */
.volume-control { flex: 1 1 260px; min-width: 140px; display:flex; align-items:center; gap:10px; }
.volume-control input[type="range"] { width:100%; }

.playback-buttons { display:flex; gap:10px; flex: 0 1 auto; align-items:center; }
.playback-buttons button { white-space:nowrap; padding:8px 12px; min-width:72px; }

/* Mobile portrait: stack controls vertically, increase safe space */
@media (max-width: 640px) {
  :root { --audio-controls-height: 180px; }
  .audio-controls { flex-direction: column; align-items: stretch; width: calc(100% - 28px); padding: 12px; }
  .volume-control { order: 1; }
  .playback-buttons { order: 2; justify-content: center; }
  .playback-buttons button { flex: 1 1 auto; }
}

/* Landscape phones / small-height devices: reduce controls height and keep inline */
@media (orientation: landscape) and (max-height: 520px) {
  :root { --audio-controls-height: 96px; }
  .audio-controls { bottom: 10px; padding: 8px 12px; flex-direction: row; width: calc(100% - 60px); }
  .volume-control { flex: 1 1 300px; }
  .playback-buttons button { min-width: 64px; padding:6px 10px; }
}

/* Desktop / wide screens: smaller safe area */
@media (min-width: 1024px) {
  :root { --audio-controls-height: 88px; }
  .audio-controls { max-width: 720px; padding: 10px 16px; }
}

/* ...existing code... */